import{d as Re,e as Ve}from"./chunk-CQGHXF5Z.js";import{a as Ne}from"./chunk-SHKPNZWI.js";import{K as Te,Q as we,b as he,d as ue,e as fe,f as ve,g as _e,h as ge,l as be,m as Ce,n as xe,o as Se,r as O}from"./chunk-UGY3VZKS.js";import{a as Ae,b as De}from"./chunk-BLLI2KFR.js";import{a as ye,b as Ie}from"./chunk-67VTSJWB.js";import{b as de,i as H,j as pe,l as me,n as U}from"./chunk-CT6LK2C2.js";import{$a as te,Ab as I,Bb as ie,Cb as ne,Eb as f,Jb as u,Kb as s,Ob as D,Pb as R,Qb as V,Sa as ee,Sb as h,Tb as ae,Ub as j,Uc as le,Vb as re,Vc as B,Wb as L,Xa as r,Xb as N,Ya as v,Yb as k,Z as F,Zb as oe,_ as C,ca as X,dc as se,gc as ce,ha as E,ia as x,ib as _,ja as Y,nb as m,o as K,ob as P,pa as Z,pb as A,qa as d,qb as G,ra as p,tb as g,ub as T,wb as w,xb as y,yb as o,za as S,zb as c}from"./chunk-PBS4VAO5.js";import{d as Le,e as J}from"./chunk-FDERIQAA.js";var ke={asc:"desc",desc:"","":"asc"},q=(()=>{class t{constructor(){this.sortable="",this.direction="",this.sort=new S}rotate(){this.direction=ke[this.direction],this.sort.emit({column:this.sortable,direction:this.direction})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275dir=Y({type:t,selectors:[["th","sortable",""]],hostVars:4,hostBindings:function(i,n){i&1&&u("click",function(){return n.rotate()}),i&2&&A("sorting_asc",n.direction==="asc")("sorting_desc",n.direction==="desc")},inputs:{sortable:"sortable",direction:"direction"},outputs:{sort:"sort"}})}}return t})();var Q=(()=>{class t{constructor(){this._state={page:1,pageSize:10,searchTerm:"",sortColumn:"",sortDirection:"",startIndex:1,endIndex:0,totalRecords:0}}get page(){return this._state.page}get pageSize(){return this._state.pageSize}get searchTerm(){return this._state.searchTerm}get startIndex(){return this._state.startIndex}get endIndex(){return this._state.endIndex}get totalRecords(){return this._state.totalRecords}set page(e){this._set({page:e})}set pageSize(e){this._set({pageSize:e})}set searchTerm(e){this._set({searchTerm:e})}set sortColumn(e){this._set({sortColumn:e})}set sortDirection(e){this._set({sortDirection:e})}set startIndex(e){this._set({startIndex:e})}set endIndex(e){this._set({endIndex:e})}set totalRecords(e){this._set({totalRecords:e})}_set(e){Object.assign(this._state,e)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var qe=["advancedTable"];function Qe(t,l){if(t&1&&(o(0,"option",16),h(1),c()),t&2){let e=l.$implicit;m("value",e),r(),ae(e)}}function We(t,l){if(t&1){let e=f();o(0,"div",8)(1,"div",13)(2,"label",14),h(3,"Show "),o(4,"select",15),k("ngModelChange",function(n){d(e);let a=s(2);return N(a.service.pageSize,n)||(a.service.pageSize=n),p(n)}),u("ngModelChange",function(){d(e);let n=s(2);return p(n.paginate())}),w(5,Qe,2,2,"option",16,T),c(),h(7," entries"),c()()()}if(t&2){let e=s(2);r(4),L("ngModel",e.service.pageSize),r(),y(e.pageSizeOptions)}}function $e(t,l){if(t&1){let e=f();o(0,"form",2,1)(2,"div",7),_(3,We,8,1,"div",8),o(4,"div",9)(5,"div",10)(6,"label",11),h(7,"Search: "),o(8,"input",12),k("ngModelChange",function(n){d(e);let a=s();return N(a.service.searchTerm,n)||(a.service.searchTerm=n),p(n)}),u("ngModelChange",function(){d(e);let n=s();return p(n.searchData())}),c()()()()()()}if(t&2){let e=s();r(3),g(e.pageSizeOptions.length?3:-1),r(),A("col-sm-6",e.pageSizeOptions.length),r(4),L("ngModel",e.service.searchTerm)}}function Ge(t,l){if(t&1){let e=f();o(0,"th",17)(1,"div",18)(2,"input",19),u("change",function(n){d(e);let a=s(2);return p(a.selectAllRow(n))}),c()()()}if(t&2){let e=s(2);r(2),m("checked",e.selectAll)("indeterminate",e.checkIntermediate())}}function Ue(t,l){if(t&1&&(o(0,"th",22),h(1),c()),t&2){let e=s().$implicit;P("width",e.width,"px"),r(),j(" ",e.label,"")}}function Je(t,l){if(t&1){let e=f();o(0,"th",23),u("sort",function(n){d(e);let a=s(3);return p(a.onSort(n))}),h(1),c()}if(t&2){let e=s().$implicit;P("width",e.width,"px"),m("sortable",e.name),r(),j(" ",e.label,"")}}function Ke(t,l){if(t&1&&(ie(0),_(1,Ue,2,3,"th",20)(2,Je,2,4,"th",21),ne()),t&2){let e=l.$implicit;r(),g(e.sort===!1?1:2)}}function Xe(t,l){if(t&1&&(o(0,"tr"),_(1,Ge,3,2,"th",17),w(2,Ke,3,1,"ng-container",null,T),c()),t&2){let e=s();r(),g(e.hasRowSelection?1:-1),r(),y(e.columns)}}function Ye(t,l){if(t&1){let e=f();o(0,"th",17)(1,"div",18)(2,"input",19),u("change",function(n){d(e);let a=s(2);return p(a.selectAllRow(n))}),c()()()}if(t&2){let e=s(2);r(2),m("checked",e.selectAll)("indeterminate",e.checkIntermediate())}}function Ze(t,l){if(t&1&&(o(0,"th",22),h(1),c()),t&2){let e=l.$implicit;P("width",e.width,"px"),r(),j(" ",e.label,"")}}function et(t,l){if(t&1&&(o(0,"tr"),_(1,Ye,3,2,"th",17),w(2,Ze,2,3,"th",20,T),c()),t&2){let e=s();r(),g(e.hasRowSelection?1:-1),r(),y(e.columns)}}function tt(t,l){if(t&1){let e=f();o(0,"td")(1,"div",18)(2,"input",24),u("change",function(){d(e);let n=s().$index,a=s();return p(a.selectRow(n+(a.service.page-1)*a.service.pageSize))}),c()()()}if(t&2){let e=s().$index,i=s();r(2),m("checked",i.isSelected[e+(i.service.page-1)*i.service.pageSize])}}function it(t,l){if(t&1&&(o(0,"td"),I(1,"div",25),c()),t&2){let e=l.$implicit,i=s().$implicit,n=s();r(),m("innerHtml",n.callFormatter(e,i),ee)}}function nt(t,l){if(t&1&&(o(0,"tr"),_(1,tt,3,1,"td"),w(2,it,2,1,"td",null,T),c()),t&2){let e=s();A("selected",e.isSelected[+((e.service.page-1)*e.service.pageSize)]),r(),g(e.hasRowSelection?1:-1),r(),y(e.columns)}}function at(t,l){if(t&1){let e=f();o(0,"div",6)(1,"div"),h(2),c(),o(3,"ngb-pagination",26),k("pageChange",function(n){d(e);let a=s();return N(a.service.page,n)||(a.service.page=n),p(n)}),u("pageChange",function(){d(e);let n=s();return p(n.paginate())}),c()()}if(t&2){let e=s();r(2),re(" Showing ",e.service.startIndex," to ",e.service.endIndex," of ",e.service.totalRecords," entries "),r(),m("collectionSize",e.service.totalRecords),L("page",e.service.page),m("maxSize",3)("rotate",!0)("pageSize",e.service.pageSize)}}var ze=(()=>{class t{constructor(e,i,n){this.service=e,this.sanitizer=i,this.componentFactoryResolver=n,this.pagination=!1,this.isSearchable=!1,this.isSortable=!1,this.pageSizeOptions=[],this.tableData=[],this.tableClasses="",this.theadClasses="",this.hasRowSelection=!1,this.columns=[],this.collectionSize=this.tableData.length,this.selectAll=!1,this.isSelected=[],this.search=new S,this.sort=new S,this.handleTableLoad=new S}ngAfterViewChecked(){this.handleTableLoad.emit()}ngOnInit(){for(let e=0;e<this.tableData.length;e++)this.isSelected[e]=!1}ngOnChanges(e){this.paginate()}paginate(){this.service.totalRecords=this.tableData.length,this.service.totalRecords===0?this.service.startIndex=0:this.service.startIndex=(this.service.page-1)*this.service.pageSize+1,this.service.endIndex=Number((this.service.page-1)*this.service.pageSize+this.service.pageSize),this.service.endIndex>this.service.totalRecords&&(this.service.endIndex=this.service.totalRecords)}searchData(){this.search.emit(this.service.searchTerm)}onSort({column:e,direction:i}){this.headers.forEach(n=>{n.sortable!==e&&(n.direction="")}),this.service.sortColumn=e,this.service.sortDirection=i,this.sort.emit({column:e,direction:i})}callFormatter(e,i){return e.formatter(i)}checkIntermediate(){let e=this.isSelected.filter(i=>i===!0).length;return!this.selectAll&&e>0&&e<this.tableData.length}selectAllRow(e){if(this.selectAll=!this.selectAll,this.selectAll)for(let i=0;i<this.tableData.length;i++)this.isSelected[i]=!0;else for(let i=0;i<this.tableData.length;i++)this.isSelected[i]=!1}selectRow(e){this.isSelected[e]=!this.isSelected[e],this.selectAll=this.isSelected.filter(i=>i===!0).length===this.tableData.length}static{this.\u0275fac=function(i){return new(i||t)(v(Q),v(H),v(te))}}static{this.\u0275cmp=E({type:t,selectors:[["app-advanced-table"]],viewQuery:function(i,n){if(i&1&&(D(q,5),D(qe,5)),i&2){let a;R(a=V())&&(n.headers=a),R(a=V())&&(n.advancedTable=a)}},inputs:{pagination:"pagination",isSearchable:"isSearchable",isSortable:"isSortable",pageSizeOptions:"pageSizeOptions",tableData:"tableData",tableClasses:"tableClasses",theadClasses:"theadClasses",hasRowSelection:"hasRowSelection",columns:"columns"},outputs:{search:"search",sort:"sort",handleTableLoad:"handleTableLoad"},features:[oe([Q]),Z],decls:12,vars:11,consts:[["advancedTable",""],["displayForm","ngForm"],[1,"my-2"],[1,"table-responsive"],["id","advancd-table",1,"table","advanced-table","table-nowrap","mb-0"],[3,"selected"],[1,"d-flex","flex-wrap","justify-content-center","align-items-center","justify-content-md-between","mt-2"],[1,"row","mb-2"],[1,"col-12","col-sm-6"],[1,"col-12"],[1,"d-flex","align-items-center","justify-content-center","justify-content-sm-end"],[1,"d-inline"],["type","text","name","searchTerm","aria-controls","advanced-table",1,"form-control","form-control-sm","d-inline","w-auto","ms-1",3,"ngModelChange","ngModel"],[1,"text-center","text-sm-start"],[1,"form-label","me-1"],["name","pageSize","id","event-category","required","",1,"form-select","form-select-sm","w-auto","ms-1","me-1","d-inline",3,"ngModelChange","ngModel"],[3,"value"],[1,"row_select",2,"width","20px"],[1,"form-check"],["type","checkbox","value","","id","flexCheckIndeterminate",1,"form-check-input",3,"change","checked","indeterminate"],[1,"text-capitalize",3,"width"],[1,"text-capitalize","sortable","pe-3","pe-lg-auto",3,"width","sortable"],[1,"text-capitalize"],[1,"text-capitalize","sortable","pe-3","pe-lg-auto",3,"sort","sortable"],["type","checkbox","value","","id","flexCheckIndeterminate",1,"form-check-input",3,"change","checked"],[3,"innerHtml"],[1,"pagination-rounded","custom-pagination",3,"pageChange","collectionSize","page","maxSize","rotate","pageSize"]],template:function(i,n){i&1&&(_(0,$e,9,4,"form",2),o(1,"div",3)(2,"table",4,0)(4,"thead"),_(5,Xe,4,1,"tr")(6,et,4,1,"tr"),c(),o(7,"tbody"),w(8,nt,4,3,"tr",5,T),se(10,"slice"),c()(),_(11,at,4,8,"div",6),c()),i&2&&(g(n.isSearchable?0:-1),r(2),G(n.tableClasses),r(2),G(n.theadClasses),r(),g(n.isSortable?5:6),r(3),y(ce(10,7,n.tableData,(n.service.page-1)*n.service.pageSize,n.service.page*n.service.pageSize)),r(3),g(n.pagination?11:-1))},dependencies:[Te,ge,Ce,xe,he,be,ue,fe,Se,_e,ve,q,le]})}}return t})();var Me=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=x({type:t})}static{this.\u0275inj=C({imports:[B,we,O]})}}return t})();var W=[{id:1,code:"ML000001",shortDescription:"Troca de \xF3leo do motor",description:"Troca de \xF3leo do motor",price:180,status:1},{id:2,code:"ML000002",shortDescription:"Troca de filtro de ar condicionado",description:"Troca de filtro de ar condicionado",price:70,status:1},{id:3,code:"ML000003",shortDescription:"Vitrifica\xE7\xE3o do parabrisa dianteiro",description:"Vitrifica\xE7\xE3o do parabrisa dianteiro",price:700,status:1}];var M=Le(Ne());var z=function(t){return t[t.Active=1]="Active",t[t.Suspended=2]="Suspended",t[t.Inactive=3]="Inactive",t[t.Pending=4]="Pending",t[t.Complete=5]="Complete",t[t.Processing=6]="Processing",t[t.Rejected=7]="Rejected",t[t.Canceled=8]="Canceled",t[t.ErrorPayment=9]="ErrorPayment",t}(z||{});var Fe=(()=>{class t extends Ae{constructor(e){super(e,De)}static{this.\u0275fac=function(i){return new(i||t)(X(de))}}static{this.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var st=["advancedTable"],Ee=(()=>{class t{constructor(e,i,n,a){this.router=e,this.route=i,this.sanitizer=n,this.service=a,this.pageTitle=[],this.serviceList=[],this.selectAll=!1,this.ServiceStatusGroup="All",this.loading=!1,this.columns=[]}ngOnInit(){this.pageTitle=[{label:"Service",path:"/"},{label:"Service",path:"/",active:!0}],this._fetchData(),this.initAdvancedTableData()}_fetchData(){return J(this,null,function*(){let e={pageSize:25,pageIndex:1,sort:"",direction:""};try{let i=yield K(this.service.getAll(e));i.statusCode===200?this.serviceList=i.content.resultList:M.default.fire({icon:"error",title:"Erro na Requisi\xE7\xE3o",text:i.message||"Algo deu errado ao buscar os dados.",confirmButtonText:"Entendi"})}catch(i){console.error("Erro na API:",i),M.default.fire({icon:"error",title:"Erro na API",text:"N\xE3o foi poss\xEDvel carregar os dados. Tente novamente mais tarde.",confirmButtonText:"Entendi"})}})}ngAfterViewInit(){}initAdvancedTableData(){this.columns=[{name:"code",label:"C\xD3DIGO",formatter:this.serviceIDFormatter.bind(this)},{name:"description",label:"DESCRI\xC7\xC3O",formatter:e=>e.description},{name:"price",label:"PRE\xC7O",formatter:e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e.price)},{name:"status",label:"STATUS",formatter:this.serviceStatusFormatter.bind(this)},{name:"Action",label:"Action",sort:!1,formatter:this.serviceActionFormatter.bind(this)}]}handleTableLoad(e){document.querySelectorAll(".service").forEach(i=>{i.addEventListener("click",()=>{this.router.navigate(["../order/details"],{relativeTo:this.route,queryParams:{id:i.id}})})})}serviceIDFormatter(e){return this.sanitizer.bypassSecurityTrustHtml(`<a href="javascript:void(0)" class="order text-body fw-bold" id="${e.code}">#${e.code}</a> `)}serviceStatusFormatter(e){return e.status==z.Active?this.sanitizer.bypassSecurityTrustHtml('<h5><span class="badge bg-soft-success text-success"><i class="mdi mdi-bitcoin"></i> Dispon\xEDvel</span></h5>'):e.status==z.Inactive?this.sanitizer.bypassSecurityTrustHtml('<h5><span class="badge bg-soft-warning text-warning"><i class="mdi mdi-timer-sand"></i> Indispon\xEDvel</span></h5>'):e.status==z.Pending?this.sanitizer.bypassSecurityTrustHtml(' <h5><span class="badge bg-soft-danger text-danger"><i class="mdi mdi-cancel"></i> Pendente</span></h5>'):this.sanitizer.bypassSecurityTrustHtml('<h5><span class="badge bg-soft-info text-info"><i class=""></i> ---</span></h5>')}serviceActionFormatter(e){return this.sanitizer.bypassSecurityTrustHtml(`<a href="javascript:void(0);" class="action-icon"> <i class="mdi mdi-eye"></i></a>
           <a href="javascript:void(0);" class="action-icon"> <i class="mdi mdi-square-edit-outline"></i></a>
           <a href="javascript:void(0);" class="action-icon"> <i class="mdi mdi-delete"></i></a>`)}matches(e,i){return e.id?.toString().includes(i)||e.code?.toLowerCase().includes(i)||e.description?.toLowerCase().includes(i)}searchData(e){if(e===""){this._fetchData();return}this.service.findByFilter({term:e}).subscribe({next:i=>{i.statusCode===200?this.serviceList=i.content:M.default.fire({icon:"error",title:"Erro na Pesquisa",text:i.message||"N\xE3o foi poss\xEDvel realizar a pesquisa.",confirmButtonText:"Entendi"})},error:i=>{console.error("Erro na API:",i),M.default.fire({icon:"error",title:"Erro na API",text:"Houve um problema ao buscar os dados. Tente novamente mais tarde.",confirmButtonText:"Entendi"})}})}changeServiceStatusGroup(e){this.loading=!0;let i=W;i=e==="All"?W:[...W].filter(n=>n.status.toString()?.includes(e)),this.serviceList=i,setTimeout(()=>{this.loading=!1},400)}static{this.\u0275fac=function(i){return new(i||t)(v(me),v(pe),v(H),v(Fe))}}static{this.\u0275cmp=E({type:t,selectors:[["app-services"]],viewQuery:function(i,n){if(i&1&&D(st,5),i&2){let a;R(a=V())&&(n.advancedTable=a.first)}},decls:19,vars:8,consts:[["advancedTable",""],["title","",3,"breadcrumbItems"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"mb-4"],[1,"row","mb-2"],[1,"col-lg-4"],[1,"text-lg"],["type","button",1,"btn","btn-danger","waves-effect","waves-light","mb-2","me-2"],[1,"mdi","mdi-plus","me-1"],["type","button",1,"btn","btn-light","waves-effect","mb-2"],[3,"display"],["tableClasses","table-centered","theadClasses","table-light",3,"handleTableLoad","search","tableData","columns","pagination","hasRowSelection","isSearchable","isSortable"]],template:function(i,n){if(i&1){let a=f();I(0,"app-page-title",1),o(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"h4"),h(7,"Servi\xE7os oferecidos pela sua oficina"),c()(),o(8,"div",7)(9,"div",8)(10,"div",9)(11,"button",10),I(12,"i",11),h(13,"CADASTRAR SERVI\xC7O"),c(),o(14,"button",12),h(15,"Importar"),c()()()(),I(16,"app-ui-preloader",13),o(17,"app-advanced-table",14,0),u("handleTableLoad",function($){return d(a),p(n.handleTableLoad($))})("search",function($){return d(a),p(n.searchData($))}),c()()()()()}i&2&&(m("breadcrumbItems",n.pageTitle),r(16),m("display",n.loading),r(),m("tableData",n.serviceList)("columns",n.columns)("pagination",!0)("hasRowSelection",!1)("isSearchable",!0)("isSortable",!1))},dependencies:[ze,Re,ye]})}}return t})();var ct=[{path:"",component:Ee}],Pe=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=x({type:t})}static{this.\u0275inj=C({imports:[U.forChild(ct),U]})}}return t})();var ti=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=x({type:t})}static{this.\u0275inj=C({imports:[B,O,Me,Ve,Ie,Pe]})}}return t})();export{ti as ServicesModule};
